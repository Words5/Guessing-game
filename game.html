<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿ™ÿÆŸÖŸäŸÜ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      direction: rtl;
      min-height: 100vh;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 0.8s ease-in-out;
    }
    .game-title {
      font-size: 32px;
      font-weight: bold;
      margin: 20px;
      color: white;
      text-shadow: 1px 1px 4px #000;
    }
    .main-box {
      width: 90%;
      max-width: 800px;
      min-height: 400px;
      margin: 20px auto;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 16px;
      padding: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }
    .emoji-box {
      width: 100px;
      height: 100px;
      font-size: 50px;
      background: white;
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .emoji-box:hover {
      transform: scale(1.1);
    }
    .popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      color: white;
      font-size: 36px;
      text-align: center;
      flex-direction: column;
    }
    .popup span.name {
      color: gold;
      font-weight: bold;
      font-size: 42px;
      margin-top: 20px;
    }
    .restart-button {
      margin-top: 30px;
      padding: 15px 25px;
      font-size: 20px;
      cursor: pointer;
      background-color: #28a745;
      border: none;
      border-radius: 8px;
      color: white;
    }
  </style>
</head>
<body>
  <div class="game-title" id="gameTitle"></div>
  <div class="main-box" id="emojiGrid"></div>  <div class="popup" id="resultPopup" style="display:none">
    <div id="resultText"></div>
    <span class="name" id="resultName"></span>
    <button class="restart-button" onclick="restartGame()">üîÅ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑÿπÿ®ÿ©</button>
  </div>  <script>
    const topic = sessionStorage.getItem("topic") || "default";
    const words = JSON.parse(sessionStorage.getItem("words")) || [];

    const emojiMap = {
      "fruits": ["üçé", "üçå", "üçá", "üçâ", "üçí", "üçì", "üçç", "ü•≠", "üçä", "ü´ê", "üçà", "ü••", "ü´í", "üçÖ", "ü´õ", "ü•ù", "üçè", "üçã", "üçà", "üå∂Ô∏è", "ü•ï", "ü•¶", "üßÑ", "ü•î", "üåΩ", "ü•¨", "ü´ë"],
      "food": ["üçî", "üçï", "üçü", "üç´", "üçó", "üç£", "üç≥", "ü•©", "üåØ", "üçù", "üçö", "ü•ó", "üçú", "üç¶", "üç∞"],
      "flags": ["üá∏üá¶", "üá™üá¨", "üá∏üáæ", "üá©üáø", "üáÆüá∂", "üáØüá¥", "üá±üáß", "üá≤üá¶", "üáµüá∏", "üá¶üá™", "üáØüáµ", "üá∞üáº", "üá±üáæ"],
      "default": ["‚ùì"]
    };

    const bgMap = {
      "fruits": "fruits.jpg",
      "food": "food.jpg",
      "flags": "flags.jpg",
      "default": "default.jpg"
    };

    const titleMap = {
      "fruits": "üçé ÿ≠ÿ±ÿ® ÿßŸÑŸÅŸàÿßŸÉŸá",
      "food": "üçî ÿ≠ÿ±ÿ® ÿßŸÑÿ£ŸÉŸÑ",
      "flags": "üè≥Ô∏è ÿ≠ÿ±ÿ® ÿßŸÑÿ£ÿπŸÑÿßŸÖ",
      "default": "ŸÑÿπÿ®ÿ© ÿßŸÑÿ™ÿÆŸÖŸäŸÜ"
    };

    document.body.style.backgroundImage = `url('${bgMap[topic] || bgMap.default}')`;
    document.getElementById("gameTitle").textContent = titleMap[topic] || titleMap.default;

    const emojiGrid = document.getElementById("emojiGrid");
    const resultPopup = document.getElementById("resultPopup");
    const resultText = document.getElementById("resultText");
    const resultName = document.getElementById("resultName");

    let remaining = [...words];
    let usedEmojis = [...(emojiMap[topic] || emojiMap.default)].sort(() => 0.5 - Math.random());
    if (usedEmojis.length < remaining.length) {
      usedEmojis = usedEmojis.concat(Array(remaining.length - usedEmojis.length).fill("‚ùì"));
    }

    function createEmojiBox(name, emoji) {
      const box = document.createElement("div");
      box.className = "emoji-box";
      box.textContent = emoji;
      box.onclick = () => {
        if (remaining.length <= 1 || resultPopup.style.display === 'flex') return;
        box.textContent = name;
        box.style.transition = "opacity 2s ease";
        box.style.opacity = 0;

        setTimeout(() => {
          box.remove();
        }, 2000);

        remaining = remaining.filter(n => n !== name);

        if (remaining.length === 1) {
          // Show winner popup
          setTimeout(() => {
            resultText.textContent = "üèÜ ÿßŸÑŸÅÿßÿ¶ÿ≤ ŸáŸà";
            resultName.textContent = remaining[0];
            resultPopup.style.display = "flex";
          }, 1500);
        }
      };
      return box;
    }

    for (let i = 0; i < words.length; i++) {
      emojiGrid.appendChild(createEmojiBox(words[i], usedEmojis[i] || "‚ùì"));
    }

    function restartGame() {
      window.location = "index.html";
    }
  </script></body>
</html>
