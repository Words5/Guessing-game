<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿ™ÿÆŸÖŸäŸÜ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      direction: rtl;
      min-height: 100vh;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 0.8s ease-in-out;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }.game-title {
  font-size: 40px;
  margin-bottom: 20px;
  font-weight: bold;
  color: #222;
  background: rgba(255,255,255,0.8);
  padding: 10px 20px;
  border-radius: 12px;
}

.emoji-box {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  gap: 20px;
  width: 600px;
  height: 400px;
  padding: 30px;
  background-color: rgba(255, 255, 255, 0.9);
  border-radius: 24px;
  justify-items: center;
  align-items: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  overflow: hidden;
}

.emoji-item {
  font-size: 40px;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.emoji-item:hover {
  transform: scale(1.3);
}

.name-popup, .winner-popup, .loser-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 40px;
  border-radius: 20px;
  font-size: 32px;
  font-weight: bold;
  text-align: center;
  z-index: 100;
  display: none;
}

.name-popup {
  background: rgba(255,255,255,0.95);
  color: #222;
}

.winner-popup {
  background: #4CAF50;
  color: white;
  display: none;
}

.loser-popup {
  background: #f44336;
  color: white;
  display: none;
}

.reset-btn {
  margin-top: 20px;
  font-size: 18px;
  padding: 10px 20px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  background: #333;
  color: #fff;
}

  </style>
</head>
<body>
  <div class="game-title" id="gameTitle">ÿßŸÑŸÑÿπÿ®ÿ©</div>
  <div class="emoji-box" id="emojiBox"></div>  <div class="name-popup" id="namePopup"></div>
  <div class="winner-popup" id="winnerPopup">
    <div id="winnerText"></div>
    <button class="reset-btn" onclick="resetGame()">üîÅ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑÿπÿ®ÿ©</button>
  </div>
  <div class="loser-popup" id="loserPopup" onclick="hideLoserPopup()">
    <div id="loserText"></div>
  </div>  <script>
    const topic = sessionStorage.getItem("topic") || "default";
    const names = JSON.parse(sessionStorage.getItem("words")) || [];
    const emojisMap = {
      "fruits": ["üçé", "üçå", "üçá", "üçâ", "üçí", "üçì", "üçç", "ü•≠", "üçä", "ü´ê", "üçà", "ü••", "ü´í", "üçÖ", "ü´õ", "ü•ù", "üçè", "üçã", "üå∂Ô∏è", "ü•ï", "ü•¶", "üßÑ", "ü•î", "üåΩ", "ü•¨", "ü´ë"],
      "food": ["üçî", "üçï", "üçü", "üç´", "üçó", "üç£", "üç≥", "ü•©", "üåØ", "üçù", "üçö", "ü•ó", "üçú", "üç¶", "üç∞"],
      "flags": ["üá∏üá¶", "üá™üá¨", "üá∏üáæ", "üá©üáø", "üáÆüá∂", "üáØüá¥", "üá±üáß", "üá≤üá¶", "üáµüá∏", "üá¶üá™", "üáØüáµ", "üá∞üáº", "üá±üáæ"],
      "default": ["‚ùì"]
    };

    const titles = {
      "fruits": "üçì ÿ≠ÿ±ÿ® ÿßŸÑŸÅŸàÿßŸÉŸá",
      "food": "üçï ÿ≠ÿ±ÿ® ÿßŸÑÿ£ŸÉŸÑ",
      "flags": "üè≥Ô∏è ÿ≠ÿ±ÿ® ÿßŸÑÿ£ÿπŸÑÿßŸÖ",
      "default": "ŸÑÿπÿ®ÿ© ÿßŸÑÿ™ÿÆŸÖŸäŸÜ"
    };

    document.getElementById("gameTitle").textContent = titles[topic] || titles.default;
    document.body.style.backgroundImage = `url('${topic}.jpg')`;

    let availableEmojis = [...(emojisMap[topic] || emojisMap.default)];
    availableEmojis = availableEmojis.slice(0, names.length);
    const shuffled = [...names].sort(() => Math.random() - 0.5);

    const emojiBox = document.getElementById("emojiBox");
    const namePopup = document.getElementById("namePopup");
    const winnerPopup = document.getElementById("winnerPopup");
    const loserPopup = document.getElementById("loserPopup");
    const winnerText = document.getElementById("winnerText");
    const loserText = document.getElementById("loserText");

    shuffled.forEach((name, i) => {
      const emoji = document.createElement("div");
      emoji.className = "emoji-item";
      emoji.textContent = availableEmojis[i] || "‚ùì";
      emoji.dataset.name = name;
      emoji.onclick = () => revealName(emoji, name);
      emojiBox.appendChild(emoji);
    });

    function revealName(el, name) {
      if (el.classList.contains("revealed")) return;
      el.classList.add("revealed");
      el.style.visibility = "hidden";

      namePopup.textContent = name;
      namePopup.style.display = "block";

      setTimeout(() => {
        namePopup.style.display = "none";

        el.remove();
        if (emojiBox.childElementCount === 1) {
          const winner = emojiBox.firstChild.dataset.name;
          emojiBox.innerHTML = '';
          winnerText.textContent = `üéâ ÿßŸÑŸÅÿßÿ¶ÿ≤ ŸáŸà: ${winner}`;
          winnerPopup.style.display = "block";
        } else if (emojiBox.childElementCount > 1) {
          loserText.textContent = `‚ùå ${name} - ÿ≠ÿ∏ÿßŸã ÿ£ŸàŸÅÿ±`;
          loserPopup.style.display = "block";
        }
      }, 2000);
    }

    function hideLoserPopup() {
      loserPopup.style.display = "none";
    }

    function resetGame() {
      sessionStorage.clear();
      window.location = "index.html";
    }
  </script></body>
</html>
