<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿ™ÿÆŸÖŸäŸÜ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      direction: rtl;
      min-height: 100vh;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 0.8s ease-in-out;
      display: flex;
      flex-direction: column;
      align-items: center;
    }.game-title {
  font-size: 36px;
  margin: 20px;
  color: #fff;
  text-shadow: 1px 1px 5px #000;
}

.emoji-container {
  width: 90%;
  max-width: 900px;
  height: 400px;
  background: rgba(255,255,255,0.85);
  border-radius: 20px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  padding: 30px;
  gap: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.emoji-item {
  width: 90px;
  height: 90px;
  font-size: 48px;
  background: #fff;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.3s;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.emoji-item:hover {
  transform: scale(1.1);
}

.overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.popup {
  background: #fff;
  border-radius: 20px;
  padding: 40px;
  font-size: 28px;
  font-weight: bold;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  text-align: center;
  max-width: 90%;
  color: #333;
}

.winner-name {
  color: #e91e63;
  font-size: 36px;
  margin-top: 20px;
}

#restartBtn {
  display: none;
  margin-top: 20px;
  padding: 10px 30px;
  font-size: 20px;
  cursor: pointer;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 10px;
}

  </style>
</head>
<body>
  <div class="game-title" id="gameTitle"></div>
  <div class="emoji-container" id="emojiContainer"></div>  <div class="overlay" id="popupOverlay" style="display:none" onclick="hidePopup()">
    <div class="popup" id="popupContent"></div>
  </div><button id="restartBtn" onclick="location.href='index.html'">üîÑ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑÿπÿ®ÿ©</button>

  <script>
    const topic = sessionStorage.getItem("topic") || "default";
    const words = JSON.parse(sessionStorage.getItem("words")) || [];

    const emojiMap = {
      "fruits": ["üçé", "üçå", "üçá", "üçâ", "üçí", "üçì", "üçç", "ü•≠", "üçä", "ü´ê", "üçà", "ü••", "ü´í", "üçÖ", "ü´õ", "ü•ù", "üçè", "üçã", "üçà", "üå∂Ô∏è", "ü•ï", "ü•¶", "üßÑ", "ü•î", "üåΩ", "ü•¨", "ü´ë"],
      "food": ["üçî", "üçï", "üçü", "üç´", "üçó", "üç£", "üç≥", "ü•©", "üåØ", "üçù", "üçö", "ü•ó", "üçú", "üç¶", "üç∞"],
      "flags": ["üá∏üá¶", "üá™üá¨", "üá∏üáæ", "üá©üáø", "üáÆüá∂", "üáØüá¥", "üá±üáß", "üá≤üá¶", "üáµüá∏", "üá¶üá™", "üáØüáµ", "üá∞üáº", "üá±üáæ"],
      "default": ["‚ùì"]
    };

    const titleMap = {
      "fruits": "üçé ÿ≠ÿ±ÿ® ÿßŸÑŸÅŸàÿßŸÉŸá",
      "food": "üçî ÿ≠ÿ±ÿ® ÿßŸÑÿ£ŸÉŸÑ",
      "flags": "üè≥Ô∏è ÿ≠ÿ±ÿ® ÿßŸÑÿ£ÿπŸÑÿßŸÖ",
      "default": "‚ùì ŸÑÿπÿ®ÿ© ÿßŸÑÿ™ÿÆŸÖŸäŸÜ"
    };

    document.getElementById("gameTitle").textContent = titleMap[topic] || titleMap.default;
    document.body.style.backgroundImage = `url('${topic}.jpg')`;

    const emojis = emojiMap[topic] ? [...emojiMap[topic]] : [...emojiMap.default];
    shuffleArray(emojis);

    const container = document.getElementById("emojiContainer");
    let remaining = [...words];
    let usedEmojis = [];

    words.forEach((name, index) => {
      const emoji = emojis[index % emojis.length];
      usedEmojis.push(emoji);
      const div = document.createElement("div");
      div.className = "emoji-item";
      div.textContent = emoji;
      div.onclick = () => revealName(div, name);
      container.appendChild(div);
    });

    function revealName(element, name) {
      if (document.getElementById("popupOverlay").style.display === "flex") return;

      element.onclick = null;
      element.style.transition = "opacity 2s";
      element.style.opacity = 0;
      setTimeout(() => {
        element.textContent = name;
        element.style.opacity = 1;
        element.style.color = '#2196F3';
        element.style.fontSize = '22px';
      }, 2000);

      remaining = remaining.filter(n => n !== name);
      if (remaining.length === 1) {
        setTimeout(() => showPopup("ÿßŸÑŸÅÿßÿ¶ÿ≤ ŸáŸà", remaining[0], true), 2500);
      } else {
        setTimeout(() => showPopup("ÿ≠ÿ∏Ÿãÿß ÿ£ŸàŸÅÿ±", name, false), 2500);
      }
    }

    function showPopup(title, name, isWinner) {
      const popup = document.getElementById("popupContent");
      popup.innerHTML = `<div>${title}</div><div class='winner-name'>${name}</div>`;
      document.getElementById("popupOverlay").style.display = "flex";
      if (isWinner) {
        document.getElementById("restartBtn").style.display = "inline-block";
      }
    }

    function hidePopup() {
      document.getElementById("popupOverlay").style.display = "none";
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
  </script></body>
</html>
